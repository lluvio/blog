---
title: "è™¾ç±³ã€è™¾ç±³"
description: "Description of the post"
date: 2018-01-02
---

æœ¬æ–‡ä¸»è¦æè¿°ç ´è§£è™¾ç±³éŸ³ä¹çš„è¿‡ç¨‹

<!--more-->


## æŠ“åŒ…åˆ†æ

çœ‹åˆ°æºç æœ‰è¿¹å¯å¾ªï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹å®¢æˆ·ç«¯å‘èµ·çš„ç½‘ç»œè¯·æ±‚æœ‰ä»€ä¹ˆå†…å®¹ã€‚å› ä¸ºæˆ‘ä»¬ä¸»è¦æ˜¯çªç ´ä¸‹è½½é™åˆ¶ï¼Œæ‰€ä»¥åªè¦çœ‹çœ‹ç‚¹å‡»ä¸‹è½½éŸ³ä¹çš„æ—¶å€™ä¼šå‘å‡ºä»€ä¹ˆè¯·æ±‚å†…å®¹ã€‚è¿™é‡Œæˆ‘ç‚¹å‡»ä¸‹è½½æˆ‘å–œçˆ±çš„éŸ³ä¹ <To The Moon>ï¼Œæ³¨æ„ï¼Œè¿™æ˜¯é¦–å…è´¹éŸ³ä¹ã€‚é€šè¿‡ Charles æˆ‘ä»¬å¯ä»¥æ¸…æ™°çš„çœ‹åˆ° åœ¨è™¾ç±³çš„äºŒçº§åŸŸååœ°å€ä¸‹å‡ºç°ä¸€æ¡è¯·æ±‚ï¼Œå†…å®¹å¦‚ä¸‹

```js
{
	"api": "mtop.alimusic.music.songservice.getsongs",
	"data": {
		"data": {
			"songs": [{
				"albumId": 488119,
				"albumLanguage": "çº¯éŸ³ä¹",
				"albumLogo": "http://pic.xiami.net/images/album/img1/101201/4881191474876940.jpg",
				"albumLogoS": "http://pic.xiami.net/images/album/img1/101201/4881191474876940.jpg@1e_1c_0i_1o_100Q_225w_225h.webp",
				"albumName": "To the Moon (Original Soundtrack)",
				"albumSongCount": 31,
				"albumSubName": "å»æœˆçƒ",
				"arrangement": "",
				"artistAlbumCount": 5,
				"artistAlias": "é«˜ç° / Kan \"Reives\" Gao",
				"artistId": 101201,
				"artistLogo": "http://pic.xiami.net/images/artistlogo/57/13729288146557.jpg",
				"artistName": "Kan R. Gao",
				"bakSongId": 0,
				"bizTags": ["LOSSLESS", "X_FREE", "A_KB61"],
				"cdSerial": 1,
				"composer": "",
				"downloadCount": false,
				"exclusive": false,
				"flag": 65,
				"gmtCreate": 1405042306000,
				"length": 178023,
				"listenFiles": [{
					"expire": 1514892837675,
					"fileSize": 31417782,
					"format": "wav",
					"listenFile": "http://m740.xiami.net/201/101201/488119/1770742208_1512322229271.wav?auth_key=1515466800-0-0-7d1af74af86c0c440a8a006fe329a208",
					"playVolume": 89.0,
					"quality": "s"
				}, {
					"expire": 1514892837674,
					"fileSize": 732445,
					"format": "m4a",
					"listenFile": "http://m32.xiami.net/201/101201/488119/1770742208_1512322229271.m4a?auth_key=1515466800-0-0-4fcc45a28491b2e534a43b240d897dd5",
					"playVolume": 89.0,
					"quality": "e"
				}, {
					"expire": 1514892837674,
					"fileSize": 1447561,
					"format": "m4a",
					"listenFile": "http://m64.xiami.net/201/101201/488119/1770742208_1512322229271.m4a?auth_key=1515466800-0-0-4fcc45a28491b2e534a43b240d897dd5",
					"playVolume": 89.0,
					"quality": "f"
				}, {
					"expire": 1514892837675,
					"fileSize": 7127248,
					"format": "mp3",
					"listenFile": "http://m320.xiami.net/201/101201/488119/1770742208_1512322229271.mp3?auth_key=1515466800-0-0-c450f22705979fadba190b89f955564a",
					"playVolume": 89.0,
					"quality": "h"
				}, {
					"expire": 1514892837675,
					"fileSize": 2850898,
					"format": "mp3",
					"listenFile": "http://m128.xiami.net/201/101201/488119/1770742208_1512322229271.mp3?auth_key=1515466800-0-0-c450f22705979fadba190b89f955564a",
					"playVolume": 89.0,
					"quality": "l"
				}],
				"lyricInfo": {
					"isOfficial": false,
					"lyricFile": "http://img.xiami.net/lyric/8/1770742208_1477686804738_5001.lrc",
					"lyricId": 4126693,
					"lyricType": 2
				},
				"musicType": 0,
				"mvId": "",
				"needPayFlag": 0,
				"newSubName": "",
				"offline": false,
				"offlineType": 0,
				"originOffline": false,
				"pace": 0,
				"panFlag": 0,
				"pinyin": "For River - Piano (Sarah & Tommy's Version)",
				"purviewRoleVOs": [{
					"filesize": 732445,
					"isExist": true,
					"operationVOs": [{
						"needPay": false,
						"needVip": false,
						"purpose": 1,
						"upgradeRole": 0
					}, {
						"needPay": false,
						"needVip": false,
						"purpose": 2,
						"upgradeRole": 0
					}],
					"quality": "e"
				}, {
					"filesize": 1447561,
					"isExist": true,
					"operationVOs": [{
						"needPay": false,
						"needVip": false,
						"purpose": 1,
						"upgradeRole": 0
					}, {
						"needPay": false,
						"needVip": false,
						"purpose": 2,
						"upgradeRole": 0
					}],
					"quality": "f"
				}, {
					"filesize": 2850898,
					"isExist": true,
					"operationVOs": [{
						"needPay": false,
						"needVip": false,
						"purpose": 1,
						"upgradeRole": 0
					}, {
						"needPay": false,
						"needVip": false,
						"purpose": 2,
						"upgradeRole": 0
					}],
					"quality": "l"
				}, {
					"filesize": 7127248,
					"isExist": true,
					"operationVOs": [{
						"needPay": false,
						"needVip": false,
						"purpose": 1,
						"upgradeRole": 0
					}, {
						"needPay": false,
						"needVip": false,
						"purpose": 2,
						"upgradeRole": 0
					}],
					"quality": "h"
				}, {
					"filesize": 31417782,
					"isExist": true,
					"operationVOs": [{
						"needPay": false,
						"needVip": true,
						"purpose": 1,
						"upgradeRole": 3
					}, {
						"needPay": false,
						"needVip": true,
						"purpose": 2,
						"upgradeRole": 3
					}],
					"quality": "s"
				}],
				"singerVOs": [{
					"alias": "é«˜ç° / Kan \"Reives\" Gao",
					"artistId": 101201,
					"artistName": "Kan R. Gao"
				}],
				"singers": "Kan R. Gao",
				"songId": 1770742208,
				"songName": "For River - Piano (Sarah & Tommy's Version)",
				"songStatus": 0,
				"songwriters": "",
				"subName": "",
				"thirdpartyUrl": "",
				"track": 4,
				"translation": ""
			}]
		},
		"header": {
			"traceId": "0bb6125515148696226097006e0ad7",
			"version": 1
		}
	},
	"ret": ["SUCCESS::è°ƒç”¨æˆåŠŸ"],
	"v": "1.0"
}
```

ä¸æ­¤åŒæ—¶ï¼Œå®¢æˆ·ç«¯ä¹ŸåŒæ­¥è¿›è¡Œç€ä¸‹è½½ã€‚é‚£ä¹ˆæˆ‘ç‚¹å‡»ä¸‹è½½ä¸€é¦–æ”¶è´¹éŸ³ä¹å‘¢ï¼Ÿè¿™é‡Œæˆ‘ç‚¹äº†å‘¨æ€»çš„ <å‘Šç™½æ°”çƒ>ï¼ŒCharlesæŠ“åˆ°äº†å’Œä¸Šé¢ <To The Moon> åŒä¸€ä¸ªåŸŸä¸‹çš„è¯·æ±‚ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```js
{
	"api": "mtop.alimusic.music.songservice.getsongs",
	"data": {
		"data": {
			"songs": [{
				"albumId": 2100350206,
				"albumLanguage": "å›½è¯­",
				"albumLogo": "http://pic.xiami.net/images/album/img60/1260/21003502061466736281.jpg",
				"albumLogoS": "http://pic.xiami.net/images/album/img60/1260/21003502061466736281.jpg@1e_1c_0i_1o_100Q_225w_225h.webp",
				"albumName": "å‘¨æ°ä¼¦çš„åºŠè¾¹æ•…äº‹",
				"albumSongCount": 10,
				"albumSubName": "å‘¨æ°ä¼¦çš„ç¡å‰æ•…äº‹ / Jay Chou's Bedtime Stories",
				"arrangement": "æ—è¿ˆå¯",
				"artistAlbumCount": 30,
				"artistAlias": "Jay Chou / Jay",
				"artistId": 1260,
				"artistLogo": "http://pic.xiami.net/images/artistlogo/40/14718358207940.jpg",
				"artistName": "å‘¨æ°ä¼¦",
				"bakSongId": 0,
				"bizTags": ["LOSSLESS", "S_PAY", "RI_A5YY", "X_FREE", "XN_BJ9QM", "S_AUTH"],
				"cdSerial": 1,
				"composer": "å‘¨æ°ä¼¦",
				"downloadCount": false,
				"exclusive": false,
				"flag": 65,
				"gmtCreate": 1464920848000,
				"length": 215020,
				"listenFiles": [{
					"expire": 1514897973056,
					"fileSize": 37952301,
					"format": "wav",
					"listenFile": "http://m740.xiami.net/260/1260/2100350206/1776156051_1493963551486.wav?auth_key=1515466800-0-0-27e9e02a1691996957974278808a6fef",
					"playVolume": 89.0,
					"quality": "s"
				}, {
					"expire": 1514897973056,
					"fileSize": 886204,
					"format": "m4a",
					"listenFile": "http://m32.xiami.net/260/1260/2100350206/1776156051_1493963551486.m4a?auth_key=1515466800-0-0-645db6492acb881b1b3ee66408ae5ead",
					"playVolume": 89.0,
					"quality": "e"
				}, {
					"expire": 1514897973056,
					"fileSize": 1746878,
					"format": "m4a",
					"listenFile": "http://m64.xiami.net/260/1260/2100350206/1776156051_1493963551486.m4a?auth_key=1515466800-0-0-645db6492acb881b1b3ee66408ae5ead",
					"playVolume": 89.0,
					"quality": "f"
				}, {
					"expire": 1514897973056,
					"fileSize": 8608913,
					"format": "mp3",
					"listenFile": "http://m320.xiami.net/260/1260/2100350206/1776156051_1493963551486.mp3?auth_key=1515466800-0-0-37430a65b62c6a16292fc64b07fc41cd",
					"playVolume": 89.0,
					"quality": "h"
				}, {
					"expire": 1514897973056,
					"fileSize": 3443564,
					"format": "mp3",
					"listenFile": "http://m128.xiami.net/260/1260/2100350206/1776156051_1493963551486.mp3?auth_key=1515466800-0-0-37430a65b62c6a16292fc64b07fc41cd",
					"playVolume": 89.0,
					"quality": "l"
				}],
				"lyricInfo": {
					"isOfficial": true,
					"lyricFile": "http://img.xiami.net/lyric/51/1776156051_1505273986_2447.trc",
					"lyricId": 13415883,
					"lyricType": 3
				},
				"musicType": 0,
				"mvId": "K6YVPL",
				"needPayFlag": 2,
				"newSubName": "",
				"offline": false,
				"offlineType": 0,
				"originOffline": false,
				"pace": 0,
				"panFlag": 0,
				"pinyin": "gao bai qi qiu",
				"purviewRoleVOs": [{
					"filesize": 886204,
					"isExist": true,
					"operationVOs": [{
						"needPay": false,
						"needVip": false,
						"purpose": 1,
						"upgradeRole": 0
					}, {
						"needPay": false,
						"needVip": false,
						"purpose": 2,
						"upgradeRole": 4
					}],
					"quality": "e"
				}, {
					"filesize": 1746878,
					"isExist": true,
					"operationVOs": [{
						"needPay": false,
						"needVip": false,
						"purpose": 1,
						"upgradeRole": 0
					}, {
						"needPay": false,
						"needVip": false,
						"purpose": 2,
						"upgradeRole": 4
					}],
					"quality": "f"
				}, {
					"filesize": 3443564,
					"isExist": true,
					"operationVOs": [{
						"needPay": false,
						"needVip": false,
						"purpose": 1,
						"upgradeRole": 0
					}, {
						"needPay": true,
						"needVip": true,
						"purpose": 2,
						"upgradeRole": 4
					}],
					"quality": "l"
				}, {
					"filesize": 8608913,
					"isExist": true,
					"operationVOs": [{
						"needPay": true,
						"needVip": true,
						"purpose": 1,
						"upgradeRole": 4
					}, {
						"needPay": true,
						"needVip": true,
						"purpose": 2,
						"upgradeRole": 4
					}],
					"quality": "h"
				}, {
					"filesize": 37952301,
					"isExist": true,
					"operationVOs": [{
						"needPay": true,
						"needVip": true,
						"purpose": 1,
						"upgradeRole": 4
					}, {
						"needPay": true,
						"needVip": true,
						"purpose": 2,
						"upgradeRole": 4
					}],
					"quality": "s"
				}],
				"singerVOs": [{
					"alias": "Jay Chou / Jay",
					"artistId": 1260,
					"artistName": "å‘¨æ°ä¼¦"
				}],
				"singers": "å‘¨æ°ä¼¦",
				"songId": 1776156051,
				"songName": "å‘Šç™½æ°”çƒ",
				"songStatus": 0,
				"songwriters": "æ–¹æ–‡å±±",
				"subName": "",
				"thirdpartyUrl": "",
				"track": 8,
				"translation": ""
			}]
		},
		"header": {
			"traceId": "0b8f4f7715148721092548862ebb31",
			"version": 1
		}
	},
	"ret": ["SUCCESS::è°ƒç”¨æˆåŠŸ"],
	"v": "1.0"
}
```

é—æ†¾çš„æ˜¯å®¢æˆ·ç«¯è·³å‡ºå¼¹æ¡†ï¼Œå‘ŠçŸ¥æ­¤æ­Œæ›²éœ€è´­ä¹°åå¯æ’­æ”¾æˆ–ä¸‹è½½ã€‚

ä½†æ˜¯...è™¾ç±³ä½ ä»¬ä¸ºä»€ä¹ˆæŠŠæ­Œæ›²çš„æ’­æ”¾åœ°å€æ”¾å‡ºæ¥äº†ï¼ï¼

```js
"listenFiles": [{
					"expire": 1514897973056,
					"fileSize": 37952301,
					"format": "wav",
					"listenFile": "http://m740.xiami.net/260/1260/2100350206/1776156051_1493963551486.wav?auth_key=1515466800-0-0-27e9e02a1691996957974278808a6fef",
					"playVolume": 89.0,
					"quality": "s"
				}, {
					"expire": 1514897973056,
					"fileSize": 886204,
					"format": "m4a",
					"listenFile": "http://m32.xiami.net/260/1260/2100350206/1776156051_1493963551486.m4a?auth_key=1515466800-0-0-645db6492acb881b1b3ee66408ae5ead",
					"playVolume": 89.0,
					"quality": "e"
				}, {
					"expire": 1514897973056,
					"fileSize": 1746878,
					"format": "m4a",
					"listenFile": "http://m64.xiami.net/260/1260/2100350206/1776156051_1493963551486.m4a?auth_key=1515466800-0-0-645db6492acb881b1b3ee66408ae5ead",
					"playVolume": 89.0,
					"quality": "f"
				}, {
					"expire": 1514897973056,
					"fileSize": 8608913,
					"format": "mp3",
					"listenFile": "http://m320.xiami.net/260/1260/2100350206/1776156051_1493963551486.mp3?auth_key=1515466800-0-0-37430a65b62c6a16292fc64b07fc41cd",
					"playVolume": 89.0,
					"quality": "h"
				}, {
					"expire": 1514897973056,
					"fileSize": 3443564,
					"format": "mp3",
					"listenFile": "http://m128.xiami.net/260/1260/2100350206/1776156051_1493963551486.mp3?auth_key=1515466800-0-0-37430a65b62c6a16292fc64b07fc41cd",
					"playVolume": 89.0,
					"quality": "l"
				}],
```

ç»è¿‡å®æµ‹ï¼Œæ’­æ”¾åœ°å€éƒ½æ˜¯å¯ç”¨çš„ï¼Œè€Œä¸”éƒ½å¯ä»¥ä¸‹è½½ã€‚æ¥å£ä¸Šæ²¡æœ‰åšä»»ä½•é™åˆ¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥çŒœæµ‹å‡ºï¼Œä¸‹è½½é™åˆ¶åœ¨å®¢æˆ·ç«¯æœ¬åœ°åšå‘¢ï¼Ÿä¸‹ä¸€æ­¥å°±æ˜¯åˆ†ææºç ã€‚



## æ‰¾åˆ°æºç 

mac ä¸‹çš„è™¾ç±³éŸ³ä¹ï¼Œä¹‹å‰ä¸€ç›´éƒ½æ˜¯ oc å†™çš„ï¼Œåæ¥æŸä¸ªç‰ˆæœ¬æ”¹ç”¨äº† `electron`ã€‚è¿™ç§æƒ…å†µä¸‹ï¼ŒæŸ¥çœ‹è™¾ç±³çš„æºç æ˜¾å¾—æ›´åŠ æ–¹ä¾¿äº†ã€‚

åœ¨ `/Application/è™¾ç±³éŸ³ä¹.app` å³é”®æŸ¥çœ‹æ˜¾ç¤ºåŒ…å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°é‡Œé¢çš„ç›®å½•ç»“æ„

```
.
â”œâ”€â”€ Frameworks
â”‚Â Â  â”œâ”€â”€ Electron\ Framework.framework
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Electron\ Framework -> Versions/Current/Electron\ Framework
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Libraries -> Versions/Current/Libraries
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Resources -> Versions/Current/Resources
â”‚Â Â  â”‚Â Â  â””â”€â”€ Versions
â”‚Â Â  â”œâ”€â”€ Mantle.framework
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Headers -> Versions/Current/Headers
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Mantle -> Versions/Current/Mantle
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Modules -> Versions/Current/Modules
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Resources -> Versions/Current/Resources
â”‚Â Â  â”‚Â Â  â””â”€â”€ Versions
â”‚Â Â  â”œâ”€â”€ ReactiveCocoa.framework
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Headers -> Versions/Current/Headers
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Modules -> Versions/Current/Modules
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ReactiveCocoa -> Versions/Current/ReactiveCocoa
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Resources -> Versions/Current/Resources
â”‚Â Â  â”‚Â Â  â””â”€â”€ Versions
â”‚Â Â  â”œâ”€â”€ Squirrel.framework
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Headers -> Versions/Current/Headers
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Modules -> Versions/Current/Modules
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Resources -> Versions/Current/Resources
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Squirrel -> Versions/Current/Squirrel
â”‚Â Â  â”‚Â Â  â””â”€â”€ Versions
â”‚Â Â      â””â”€â”€ Contents
â”œâ”€â”€ Info.plist
â”œâ”€â”€ MacOS
â”‚Â Â  â””â”€â”€ è™¾ç±³éŸ³ä¹.sh
â”œâ”€â”€ PkgInfo
â”œâ”€â”€ Resources
â”‚Â Â  â”œâ”€â”€ am.lproj
â”‚Â Â  â”œâ”€â”€ app.asar
â”‚Â Â  â”œâ”€â”€ ar.lproj
â”‚Â Â  â”œâ”€â”€ bg.lproj
â”‚Â Â  â”œâ”€â”€ bn.lproj
â”‚Â Â  â”œâ”€â”€ ca.lproj
â”‚Â Â  â”œâ”€â”€ cs.lproj
â”‚Â Â  â”œâ”€â”€ da.lproj
â”‚Â Â  â”œâ”€â”€ de.lproj
â”‚Â Â  â”œâ”€â”€ el.lproj
â”‚Â Â  â”œâ”€â”€ electron.asar
â”‚Â Â  â”œâ”€â”€ electron.icns
â”‚Â Â  â”œâ”€â”€ en.lproj
â”‚Â Â  ...
â”‚Â Â  â””â”€â”€ zh_TW.lproj
â””â”€â”€ _CodeSignature
    â””â”€â”€ CodeResources
```

ä¸éš¾å‘ç°ï¼Œ`è™¾ç±³éŸ³ä¹.sh` åº”è¯¥æ˜¯å…¥å£æ–‡ä»¶ï¼Œä½†è¿™é‡Œä¸æ˜¯æˆ‘ä»¬è¦è€ƒè™‘çš„é‡ç‚¹ï¼Œå› ä¸ºè¿™ä¸ªæ–‡ä»¶å¤ªå°ï¼Œå¯¹äºä½¿ç”¨ `electron` å¼€å‘çš„ç¨‹åºï¼Œæ–‡ä»¶ä½“ç§¯ä¸€å®šä¸å°ã€‚`Resources` æ–‡ä»¶å¤¹æ‰“å¼€æˆ‘ä»¬ä¼šå‘ç°ä¸€äº› `*.asar` åç¼€çš„æ–‡ä»¶ï¼Œè¿™ç±»æ–‡ä»¶é€šè¿‡æœç´¢å‘ç°æ˜¯ç”±å·¥å…· [asar](https://github.com/electron/asar) å‹ç¼©è€Œæˆï¼Œèƒ½å‹ç¼©è¯´æ˜ä¹Ÿèƒ½è§£å‹ã€‚çœ‹äº†ä¸‹ `asar`ç›¸å…³çš„ä½¿ç”¨è¯´æ˜ï¼Œå‘ç°åªè¦ä¸€æ¡å‘½ä»¤å°±å¯ä»¥è§£å‹

```bash
asar extract app.asar destfolder 
```

`asar` éœ€è¦è‡ªè¡Œå®‰è£…

```bash
npm install asar -g
```

ç°åœ¨æˆ‘ä»¬çœ‹çœ‹è§£å‹åçš„æ–‡ä»¶ç›®å½•

```
Î» â€º tree -L 4                                                   Downloads/destfolder
.
â”œâ”€â”€ app
â”‚Â Â  â”œâ”€â”€ iconTemplate.png
â”‚Â Â  â”œâ”€â”€ iconTemplate@2x.png
â”‚Â Â  â”œâ”€â”€ logo.ico
â”‚Â Â  â”œâ”€â”€ main.js
â”‚...
â”‚Â Â  â””â”€â”€ web
â”‚Â Â      â”œâ”€â”€ desktopLyric
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ index.css
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ index.html
â”‚Â Â      â”‚Â Â  â””â”€â”€ index.js
â”‚Â Â      â”œâ”€â”€ globalAudioPlayer
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ index.html
â”‚Â Â      â”‚Â Â  â””â”€â”€ index.js
â”‚Â Â      â”œâ”€â”€ iconfont-65049ad1caa5ef0ea51297f3d84d6a6f.woff
â”‚Â Â      â”œâ”€â”€ loading-e6adf27e4ee9338fe88bc86947d2a436.png
â”‚Â Â      â”œâ”€â”€ player
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ index.css
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ index.html
â”‚Â Â      â”‚Â Â  â””â”€â”€ index.js
â”‚Â Â      â”œâ”€â”€ popWindow
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ index.css
â”‚Â Â      â”‚Â Â  â”œâ”€â”€ index.html
â”‚Â Â      â”‚Â Â  â””â”€â”€ index.js
â”‚Â Â      â””â”€â”€ xiami-0a6da4b9f64d5839d77220063554a592.png
â”œâ”€â”€ build
â”‚Â Â  â”œâ”€â”€ background.png
â”‚Â Â  â”œâ”€â”€ icon.icns
â”‚Â Â  â””â”€â”€ icon.ico
â””â”€â”€ package.json
```

å¥½äº†ï¼Œè¿™é‡Œåº”è¯¥ä¸éš¾çŒœå‡º `player` æ–‡ä»¶å¤¹é‡Œé¢çš„ä»£ç å°±æ˜¯æˆ‘ä»¬çš„ç›®æ ‡




## åˆ†ææºç 

æºç æ˜¯ç®€å•çš„æ··æ·†å‹ç¼©è¿‡çš„ï¼Œä½†æˆ‘ä»¬æ˜¯å¯ä»¥å€ŸåŠ©å¤§éƒ¨åˆ†å·¥å…·è‡ªåŠ¨åŒ–ä»£ç ã€‚ç¬”è€…è¿™é‡Œä½¿ç”¨äº† `vscode` ç›´æ¥å¯¹æºç è‡ªåŠ¨åŒ–ã€‚

è‡ªåŠ¨åŒ–å¯ä»¥æœç´¢ä¸‹ç›¸å…³å…³é”®å­—æ®µï¼Œä¾‹å¦‚ `isvip` ã€`vip`ã€`member` ç­‰ç­‰ï¼Œè¿™é‡Œç¬”è€…å°± `isvip` æœå‡ºä¸€ä¸ªå…³é”®çš„å‡½æ•° `startDownload` ï¼Œå› ä¸ºä»£ç å·²ç»æ˜¯æ˜æ–‡å±•ç¤ºäº†ï¼Œå¤§å®¶éœ€è¦åšçš„å°±æ˜¯å¯¹ä¸šåŠ¡é€»è¾‘è¿›è¡Œåˆ†æã€‚ä¸‹é¢ç¬”è€…åœ¨ä¸€äº›å…³é”®ä»£ç ä¸ŠåŠ äº†æ³¨é‡Š

```js
a.prototype.startDownload = function (e, t, n) {
        var r = this,
            a = e.slice(0, 101);
        if (h.default.isLogin(!0)) {
            var i = this.getDownloadConfig().downloadQuality;
            l.default.getSongsDetail({
                songIds: a
            }, !0).then(function (e) {
                var a = e.songs,
                    u = h.default.isVip(),
                    s = h.default.isSuperVip(!1),
                    l = h.default.isReachedMaxDownloadItem(!1),
                    c = a.length ? a[0] : null;
                if (a && 1 === a.length && 2 == c.offlineType) // ç¦»çº¿æƒ…å†µæ‰èµ°è¿™é‡Œ
                  f.default.dispatch({
                    type: d.SHOW_TIP_TEMPLATE,
                    name: "MobileQrcodeDialog",
                    param: {
                        id: c.songId,
                        title: "è¯·ä½¿ç”¨è™¾ç±³éŸ³ä¹APPä¸‹è½½"
                    }
                  });
                else {
                    var v = r.filterSongList(a, i); // ç­›é€‰å“ªäº›æ­Œæ›²æ˜¯å¯ä»¥è¢«ä¸‹è½½çš„ï¼ŒğŸ¤«
                    c = a.length ? a[0] : null;
                    var m = v.firstDownloadOperationVO;
                    if ("song" === t && c.offline) u ? l ? f.default.dispatch({
                        type: d.SHOW_TIP_TEMPLATE,
                        name: "MaxDowloadDialog",
                        param: {
                            title: "æ¸©é¦¨æç¤º",
                            bodyTitle: s ? "å½“æœˆä»˜è´¹ä¸‹è½½é¢åº¦å·²ç»è¾¾åˆ°500é¦–ä¸Šé™ï¼Œ" + h.default.getExpiredDays(!1) + "å¤©åå°†é‡æ–°è®¡ç®—ä¸‹è½½é¢åº¦ï¼Œæ•¬è¯·å…³æ³¨" : "å½“æœˆä¸‹è½½æ­Œæ›²é¢åº¦300é¦–å·²è¾¾ä¸Šé™ï¼Œå‡çº§è¶…çº§VIPä¼šå‘˜å¯ä»¥å¢åŠ åˆ°500é¦–ï¼Œè¿˜æœ‰ä¸“äº«ç¦åˆ©æ´»åŠ¨å‚ä¸ï¼",
                            btnConfirmName: s ? "" : "ç«‹åˆ»å‡çº§",
                            btnCancelName: "å–æ¶ˆ"
                        }
                    }) : A.send(o.MAIN_START_DOWNLOAD, {
                        songList: v.downloadItemList
                    }) : false || false ? f.default.dispatch({
                        type: d.SHOW_TIP_TEMPLATE,
                        name: "OnlyForMemberDialog",
                        param: {
                            id: c.songId,
                            title: " å·²ç»è¢«æˆ‘æ”¹é€ ",
                            btnConfirmName: "ç«‹å³å¼€é€š",
                            btnCancelName: "è´­ä¹°",
                            bodyTitle: "ç‰ˆæƒä¸ªå±å±"
                        }
                    }) : A.send(o.MAIN_START_DOWNLOAD, {
                        songList: v.downloadItemList
                    });
                    else if (v.partCannotDownload && f.default.dispatch({
                            type: p.SHOW_TOAST,
                            text: "æˆåŠŸåŠ å…¥ä¸‹è½½åˆ—è¡¨ï¼Œå·²è¿‡æ»¤æ— ç‰ˆæƒæˆ–ä»˜è´¹æ­Œæ›²"
                        }), 
                        "playlist" !== t && v.allCannotDownload && v.allCannotDownloadReason === y.Pay) 
                        {
                        v.firstCannotDownloadSongID;
                        "album" === t && n, 
                        f.default.dispatch({
                            type: d.SHOW_TIP_TEMPLATE,
                            name: "PayQRCodeDialog",
                            param: {
                                param: {
                                    type: "song",
                                    id: v.firstCannotDownloadSongID
                                }
                            }
                        })
                    } else A.send(o.MAIN_START_DOWNLOAD, { // è¿™é‡Œæ˜¯å‘é€ä¸‹è½½è¯·æ±‚çš„å…³é”®ï¼ï¼
                        songList: v.downloadItemList
                    })
                }
            }).catch(function (e) {
                alert(e) // ä¿®æ”¹ä»£ç ï¼Œå¯¹æŠ›å‡ºå¼‚å¸¸è¿›è¡Œåˆ†æ
                f.default.dispatch({
                    type: d.SHOW_TOAST_TEMPLATE,
                    toastText: "ç½‘ç»œå¼‚å¸¸ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ"
                })

            })
```



## æœ€å

å’³å’³ï¼Œä¸èƒ½å†å†™äº†ï¼Œåªèƒ½å’Œè¯»è€…è¯´ï¼Œè™¾ç±³çš„ä¸‹è½½é™åˆ¶çš„çš„ç¡®ç¡®æ˜¯åœ¨å®¢æˆ·ç«¯ä¸Šé¢ï¼Œç ´è§£çš„å…³é”®å°±åœ¨è¿™ä¸ªå‡½æ•°ä»¥åŠ`filterSongList`ï¼Œæœ‰ç»§ç»­æ¢è®¨çš„å…´è¶£å¯ä»¥é‚®æˆ‘ã€‚

å”‰ï¼Œä»¥å‰å–œæ¬¢ç”¨åƒåƒé™å¬ï¼Œåæ¥ç”¨é…·ç‹—ï¼Œå†åæ¥è™¾ç±³ï¼Œç°åœ¨ç”¨ç½‘æ˜“äº‘éŸ³ä¹ï¼Œæœªæ¥è°åˆèƒ½çŸ¥é“æ˜¯æ€æ ·çš„å‘¢
